# Changesets

This directory contains changeset files that document changes for the changelog.

## Quick Start

```bash
# After making changes, create a changeset
knope document-change
```

That's it! When your PR is merged to main, CI will automatically:

1. Detect the changeset
2. Create a Release PR with version bumps and changelogs
3. When the Release PR is merged, build artifacts and create GitHub releases

## Packages

This project has 4 independently versioned packages:

| Package                   | Description             | Changelog                     |
| ------------------------- | ----------------------- | ----------------------------- |
| `graphql-analyzer-cli`    | GraphQL CLI tool        | `crates/cli/CHANGELOG.md`     |
| `graphql-analyzer-lsp`    | GraphQL Language Server | `crates/lsp/CHANGELOG.md`     |
| `graphql-analyzer-mcp`    | GraphQL MCP Server      | `crates/mcp/CHANGELOG.md`     |
| `graphql-analyzer-vscode` | VSCode Extension        | `editors/vscode/CHANGELOG.md` |

## Changeset Format

Create a file in `.changeset/` with any name ending in `.md`:

```markdown
---
graphql-analyzer-cli: patch
graphql-analyzer-lsp: minor
---

Add new feature to CLI and LSP
```

List the packages affected and their bump type. Only include packages that have changes.

### Version Bump Types

- **major**: Breaking changes (API changes, removed features)
- **minor**: New features, significant improvements
- **patch**: Bug fixes, documentation updates

### Examples

**CLI-only change:**

```markdown
---
graphql-analyzer-cli: patch
---

Fix argument parsing bug
```

**Change affecting multiple packages:**

```markdown
---
graphql-analyzer-cli: minor
graphql-analyzer-lsp: minor
graphql-analyzer-mcp: minor
---

Add support for new GraphQL directive
```

**VSCode extension update:**

```markdown
---
graphql-analyzer-vscode: patch
---

Fix syntax highlighting for fragments
```

## When to Create a Changeset

**DO create changesets for:**

- New features
- Bug fixes
- Breaking changes
- Significant improvements

**DON'T create changesets for:**

- Internal refactoring (no behavior change)
- CI/CD changes
- Test-only changes
- Documentation-only changes

## Release Flow

1. Create changesets with `knope document-change`
2. Push/merge to main
3. CI detects changesets → creates Release PR
4. Review and merge Release PR
5. CI builds artifacts → creates GitHub releases for affected packages
