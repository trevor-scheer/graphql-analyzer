# Issue queries

query GetIssue($owner: String!, $name: String!, $number: Int!) {
  repository(owner: $owner, name: $name) {
    issue(number: $number) {
      ...IssueFull
    }
  }
}

query GetIssueTimeline(
  $owner: String!
  $name: String!
  $number: Int!
  $first: Int = 50
  $after: String
) {
  repository(owner: $owner, name: $name) {
    issue(number: $number) {
      ...IssueBasic
      timelineItems(first: $first, after: $after) {
        totalCount
        pageInfo {
          ...PageInfoFull
        }
        nodes {
          ... on IssueComment {
            ...IssueCommentBasic
          }
          ... on CrossReferencedEvent {
            id
            createdAt
            isCrossRepository
            source {
              ... on Issue {
                ...IssueBasic
              }
              ... on PullRequest {
                ...PullRequestBasic
              }
            }
          }
          ... on ClosedEvent {
            id
            createdAt
            actor {
              ...ActorBasic
            }
            stateReason
          }
          ... on ReopenedEvent {
            id
            createdAt
            actor {
              ...ActorBasic
            }
          }
          ... on LabeledEvent {
            id
            createdAt
            actor {
              ...ActorBasic
            }
            label {
              ...LabelBasic
            }
          }
          ... on UnlabeledEvent {
            id
            createdAt
            actor {
              ...ActorBasic
            }
            label {
              ...LabelBasic
            }
          }
          ... on AssignedEvent {
            id
            createdAt
            actor {
              ...ActorBasic
            }
            assignee {
              ... on User {
                ...UserBasic
              }
            }
          }
          ... on MilestonedEvent {
            id
            createdAt
            actor {
              ...ActorBasic
            }
            milestoneTitle
          }
        }
      }
    }
  }
}

query GetIssueComments(
  $owner: String!
  $name: String!
  $number: Int!
  $first: Int = 30
  $after: String
) {
  repository(owner: $owner, name: $name) {
    issue(number: $number) {
      id
      comments(first: $first, after: $after) {
        totalCount
        pageInfo {
          ...PageInfoFull
        }
        nodes {
          ...IssueCommentBasic
          reactions(first: 10) {
            ...ReactionGroupFull
          }
        }
      }
    }
  }
}

query GetIssueParticipants($owner: String!, $name: String!, $number: Int!) {
  repository(owner: $owner, name: $name) {
    issue(number: $number) {
      id
      participants(first: 50) {
        totalCount
        nodes {
          ...UserBasic
        }
      }
    }
  }
}
